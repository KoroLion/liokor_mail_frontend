@require "constants.styl"
@require "messages.fix.styl"

// --------- Base constants.
// USES ONLY IT IN OTHER VARIABLES
// DO NOT USE IT IN STYLES!
textColor1 = #F5F5F5
textColor2 = #CCC
textColor3 = #AAA
textColor4 = #888
textColor5 = #555

color1 = #091A20
color2 = #0C2129
color3 = #314147
color4 = #3A6D7E
color5 = #DE932B

extra-small = 5px
small = 7px
middle = 10px
middle-large = 15px
large = 20px
extra-large = 30px

small-font-size = 14px
font-size = 16px
big-font-size = 18px
// ----------

small-avatar-size = 30px
middle-avatar-size = 40px
large-avatar-size = 50px

// Scrollbars
scroll-bg-color = transparent
scroll-thumb-color = #80808080
scroll-thumb-color-hover = #707070
scrollbar-width-worded = thin
scrollbar-width = 6px
scrollbar-border = 1px

border-width = 1px
border-color = color3
// Dialogue column
dialogues-column-bg-color = color2
dialogues-border-color = border-color
dialogues-border-left = border-width
dialogues-column-width = 30%
// Messages column
messages-column-bg-color = color1
messages-column-width = (100% - dialogues-column-width)

// Headers of dialogues and messages columns
headers-padding = middle
headers-border-bottom = border-width
headers-border-color = border-color
headers-bg-color = transparent
headers-text-color = textColor1
headers-shadow = 0 5px 5px #00000044
header-recipient-margin = middle

// Footer of messages column
footer-padding = middle
footer-text-color = textColor2
footer-border-top = border-width
footer-border-color = border-color
footer-bg-color = transparent

// Dialogues buttons
dialogue-button-height = 62px
dialogue-button-padding = middle
dialogue-border-bottom = border-width
dialogue-border-color = border-color
dialogue-border-left-color = color5

dialogue-button-color = color2
dialogue-border-left = 0px
dialogue-button-color-active = color2
dialogue-border-left-active = 5px
dialogue-border-left-color-active = color5
dialogue-button-color-selected = color2
dialogue-border-left-selected = 1px
dialogue-border-left-color-selected = color5
dialogue-button-color-active-selected = color2
dialogue-border-left-active-selected = 5px
dialogue-border-left-color-active-selected = color5

dialogue-text-padding-left = middle
dialogue-title-font-size = big-font-size
dialogue-time-font-size = font-size
dialogue-status-font-size = big-font-size
dialogue-between-time-and-status = 3px
dialogue-status-padding = 0 extra-small
dialogue-status-text-color = color1
dialogue-status-background-color = #5a8be0

// Folders buttons
folder-button-color = transparent
folder-button-color-active = transparent
folder-button-color-selected = transparent
folder-button-color-active-selected = transparent

new-folder-button-color = #5a361a
new-folder-button-height = dialogue-button-height - middle
new-folder-button-padding = extra-small

folder-title-padding = small

// Divider between folders and dialogues
dialogues-divider-height = 24px
dialogues-divider-bg-color = color3
dialogues-divider-border = 2px
dialogues-divider-border-color = color4

// Dialogues plugs on bottom
empty-dialogue-height = dialogue-button-height
empty-dialogue-padding = small
empty-dialogue-height-bg-color = color1

// Message blocks
between-message-blocks = 10px
message-blocks-horizontal-margin = 10px
message-blocks-border-radius = small
left-message-bg-color = color3
right-message-bg-color = color4

message-block-title-color = textColor1
message-block-title-font-size = big-font-size
message-block-between-avatar-and-title = middle-large

message-body-text-color = textColor2
message-body-text-padding = extra-small
message-body-text-margin-left = middle-large

message-status-size = 20px

// Send message button
send-message-button-horizontal-margin = small

// Message input
message-input-padding = middle-large
message-input-bg-color = #14272e
message-input-bg-color-focus = #1f3339
message-input-border-color = color3
message-input-border-color-focus = color3
message-input-text-color = textColor2
message-input-border-radius = extra-small
message-input-font-size = font-size
message-input-font-family = Arial
message-input-border-width = border-width

message-input-min-height = 30px
message-input-max-height = 200px
message-input-line-height = 16px

message-input-placeholder-text-color = textColor4
message-input-placeholder-text-color-focus = textColor5
// -------
svg-color = #F5F5F5
svg-transparent-color = #969dab
svg-hover-color = orange

loading-color = #84adff

folder-input-bg = #4c2e16


bg-color-1 = #60606099
bg-color-2 = #393C3FCC
bg-color-3 = #3b3f4799
bg-color-4 = #393939
bg-color-5 = #4b5b4bAA

bg-info = #2a2b2bEE



markdown-panel-bg = color6
markdown-hover-panel-bg = color5

mobile-profile-button-size = 35px

markdown-panel-height = 20px
markdown-button-width = 30px


height-header = dialogue-button-height

width-border = 1px

.large-avatar
.middle-avatar
.small-avatar
  border-radius 50%
  overflow hidden

.large-avatar
  width large-avatar-size
  height large-avatar-size
.middle-avatar
  width middle-avatar-size
  height middle-avatar-size
.small-avatar
  width small-avatar-size
  height small-avatar-size
/*
.pad-xs
  padding extra-small
.pad-s
  padding small
.pad-m
  padding middle
.pad-l
  padding large
.pad-xl
  padding extra-large
*/

.text-1
.text-2
.text-3
.text-4
  font-size font-size

.text-1
  color textColor1
.text-2
  color textColor2
.text-3
  color textColor3
.text-4
  color textColor4

.text-bigger
  font-size big-font-size

.fullwidth
  width 100%
.fullheight
  height 100%
#messages-page
  height 100%

.floatright
  float right
.floatleft
  float left

.center-text
  text-align center
.centered
  margin auto
.centered-vertical
  margin-top auto
  margin-bottom auto
.top-filler
  margin-top auto
.right-filler
  margin-rigth auto
.bottom-filler
  margin-bottom auto
.left-filler
  margin-left auto


// --- Table:
.table-columns
  overflow hidden
  display flex
  flex-direction row
.table-columns.reversed
  flex-direction row-reverse
.table-rows
  overflow hidden
  display flex
  flex-direction column
.table-rows.reversed
  flex-direction column-reverse
.flex-end
  align-items flex-end

.table-column
  height 100%
  padding 0
.table-row
  width 100%
  padding 0


.scrollable
  overflow-y auto
  scrollbar-width scrollbar-width-worded
  scrollbar-color scroll-thumb-color scroll-bg-color
.scrollable:hover
  scrollbar-color scroll-thumb-color-hover scroll-bg-color
.scrollable:hover::-webkit-scrollbar-thumb
  background-color scroll-thumb-color-hover
.scrollable::-webkit-scrollbar
  width scrollbar-width
.scrollable::-webkit-scrollbar-track
  background scroll-bg-color
  border-radius (scrollbar-width / 2)
.scrollable::-webkit-scrollbar-thumb
  background-color scroll-thumb-color
  border-radius (scrollbar-width / 2)
  border scrollbar-border solid scroll-bg-color

// extend table:
.dialogues-column
  background dialogues-column-bg-color
  width dialogues-column-width
  border-right dialogues-border-left solid dialogues-border-color
  padding 0
.messages-column
  background messages-column-bg-color
  width messages-column-width
  padding 0

.dialogues-listing
  overflow-x hidden
  margin 0
  padding 0
  scrollbar-color scroll-thumb-color dialogue-button-color
.dialogues-listing::-webkit-scrollbar
  background dialogue-button-color

.header // big columns headers
  padding headers-padding
  background headers-bg-color
  color headers-text-color
  box-shadow headers-shadow
  border-bottom headers-border-bottom solid headers-border-color
  z-index 2
  height height-header
.header-title // decoration for mobiles
  border-radius (small-avatar-size / 2)
  padding-left 0
  padding-right 0
  margin-left header-recipient-margin
  margin-right header-recipient-margin

.footer // messages column footer
  padding footer-padding
  color footer-text-color
  background footer-bg-color
  border-top footer-border-top solid footer-border-color
  display none // js

.tool-dialogue
  padding dialogue-button-padding
  min-height dialogue-button-height

// --- Listing button:
.listing-button
  list-style-type none
  min-height dialogue-button-height
  max-height dialogue-button-height
  overflow hidden
  padding dialogue-button-padding
  border-bottom dialogue-border-bottom solid dialogue-border-color
  background-color dialogue-button-color
  cursor pointer
  white-space nowrap
  border-left dialogue-border-left solid dialogue-border-left-color
  transition background-color ease-out 0.2s
.listing-button.active
  background-color dialogue-button-color-active
  border-left dialogue-border-left-active solid dialogue-border-left-color-active
  transition border-left ease 0.1s
.listing-button.selected
  background-color dialogue-button-color-selected
  border-left dialogue-border-left-selected solid dialogue-border-left-color-selected
  padding-left (dialogue-button-padding - dialogue-border-left-selected)
.listing-button.active.selected
  background-color dialogue-button-color-active-selected
  border-left dialogue-border-left-active-selected solid dialogue-border-left-color-active-selected
  padding-left (dialogue-button-padding - dialogue-border-left-active-selected + dialogue-border-left-active)

.listing-button.folder
  background-color folder-button-color
.listing-button.folder.active
  background-color folder-button-color-active
.listing-button.folder.selected
  background-color folder-button-color-selected
.listing-button.folder.active.selected
  background-color folder-button-color-active-selected

.dialogue-meta
  position relative
  white-space nowrap

.listing-button
.message-block
  .show-on-hover
    transition opacity ease 0.2s
    opacity 0
  .hide-on-hover
    transition opacity ease 0.2s
    opacity 1
.listing-button:hover
.message-block:hover
  .show-on-hover
    opacity 1
  .hide-on-hover
    opacity 0

.new-folder-button
  background-color new-folder-button-color
  min-height new-folder-button-height
  max-height new-folder-button-height
  padding-top new-folder-button-padding
  padding-bottom new-folder-button-padding
.new-folder-button:hover
  background-color folder-button-color-selected

.folder-title
  padding folder-title-padding

.dialogues-listing-divider
  width 100%
  height dialogues-divider-height
  min-height dialogues-divider-height
  max-height dialogues-divider-height
  background-color dialogues-divider-bg-color
  border-top dialogues-divider-border solid dialogues-divider-border-color
  border-bottom dialogues-divider-border solid dialogues-divider-border-color
  overflow hidden
  transition all 0.3s ease

.empty-dialogue
  min-height empty-dialogue-height
  overflow hidden
  padding empty-dialogue-padding
  background-color empty-dialogue-height-bg-color

.dialogue-text
  padding-left (middle-avatar-size + dialogue-text-padding-left)
.dialogue-status
  margin-top (dialogue-time-font-size + dialogue-between-time-and-status)
  padding dialogue-status-padding
  border-radius (dialogue-status-font-size / 2 + 1)
  background-color dialogue-status-background-color
  font-size dialogue-status-font-size
  color dialogue-status-text-color
.dialogue-body
.dialogue-title
  overflow hidden
  text-overflow ellipsis

// --- message-block:
.flex-filler
  flex 1

.message-block
  margin (between-message-blocks / 2) message-blocks-horizontal-margin
  border-radius message-blocks-border-radius
  border-top-left-radius (middle-avatar-size / 2)
.message-block.not-your
  background left-message-bg-color
.message-block.your
  background right-message-bg-color

.left-block
  text-align left
  margin-right 15%
.right-block
  text-align left
  margin-left 15%

.message-block-title
  color message-block-title-color
  width "calc(100% - %s - %s)" % (message-block-between-avatar-and-title middle-avatar-size)
  margin-left middle-avatar-size + message-block-between-avatar-and-title
  padding ((middle-avatar-size - message-block-title-font-size) / 2) 0

.message-body
  color message-body-text-color
  padding message-body-text-padding
  margin-left message-body-text-margin-left
  word-wrap break-word

.message-status
  width message-status-size
  height message-status-size

.messages-footer
  #message-send-button
    margin-left send-message-button-horizontal-margin
    margin-right send-message-button-horizontal-margin

.message-input
  padding message-input-padding
  padding-top (message-input-padding + markdown-panel-height)
  background message-input-bg-color
  color message-input-text-color
  border-radius message-input-border-radius
  outline none
  flex 1
  font-size message-input-font-size
  font-family message-input-font-family

  border-width message-input-border-width
  border-color message-input-border-color
  border-style inset

  word-wrap break-word
  outline 0
  min-height message-input-min-height
  resize none
  max-height message-input-max-height
  overflow-y hidden
  line-height message-input-line-height

  transition all ease 0.2s
.message-input:focus
  background message-input-bg-color-focus
  border-color message-input-border-color-focus

.message-input::placeholder
  color message-input-placeholder-text-color
  transition color ease 0.4s
.message-input:focus::placeholder
  color message-input-placeholder-text-color-focus

.connection-info
  z-index 1
  position absolute
  top -40px // to 0
  opacity 0 // to 1
  visibility hidden // to visible
  width 100%
  background bg-info
  border-bottom-left-radius small
  border-bottom-right-radius small
  box-shadow 0 5px 5px color7-4, inset 0 5px 5px color7-4
  padding extra-small
  transition all cubic-bezier(.38,1.1,.52,1.02) 0.4s
  cursor pointer
  svg
    width 25px
    height 20px
    pointer-events none

.pos-relative
  position relative
  overflow hidden

.absolute-top-right
  position absolute
  top 0
  right 0
.absolute-top-left
  position absolute
  top 0
  left 0

.inside-input
  position absolute
  right 20px
  top 10px

.svg-button
  cursor pointer
  overflow hidden
  opacity 0.7
  transition all 0.15s ease-out
  fill svg-color
  fill-rule evenodd
  clip-rule evenodd
.svg-button.transparent
  fill svg-transparent-color
.svg-button:hover
  opacity 1
  transform scale(1.1)
  fill svg-hover-color

.plus-button
  cursor pointer
  overflow hidden
  width 60px
  height 60px
  opacity 0.8
  transition all 0.1s ease
  fill #F5F5F5
  fill-rule evenodd
  clip-rule evenodd
.plus-button:hover
  opacity 1

/*
.add-button
  margin-right small
  overflow hidden
.add-button > *
  display block
  vertical-align top
  background plus-bg-color
  transition all 0.3s ease-out
.add-button.switched > *
  transform translateY(-40px)
*/

.find-input
  width "calc(100% - %s)" % (middle * 2)
  font-size small-font-size
  margin-bottom extra-small
  margin-right middle
  margin-left extra-small
  background #FFFFFF00
  border none
  outline none
  overflow hidden
  text-overflow ellipsis
  transition all ease 0.2s
  color color2

.find-input:focus
  padding middle
  background bg-color-4
  color color2
  border-radius extra-small
  border-width width-border
  border-style inset
  margin-left middle

.find-input::placeholder
  color color4
.find-input:focus::placeholder
  color color3

.folders-button
  min-width 40px
  opacity 1
  transition all 0.2s ease
.find-input:focus ~ .folders-button
  min-width 0
  width 0
  opacity 0
#folder-icon-arrow
  transition transform 0.2s ease
  transform scale(0.03) rotate(0deg) translate(500px, 430px)

.input-with-clear ~ .input-clear
  max-width 0
  transition all ease-out 0.4s
  opacity 0
  transform rotate(45deg)
.input-with-clear:focus ~ .input-clear
  max-width 100px
  opacity 1
  transform rotate(0)

.theme-input
  font-size small-font-size
  margin-bottom extra-small
  background #FFFFFF00
  border none
  outline none
  transition all ease 0.2s
  color color2
  text-overflow ellipsis

.theme-input:focus
  background bg-color-2
  color color3
.theme-input::placeholder
  transition all ease 0.2s
  color color4
.theme-input:focus::placeholder
  color color3

.theme-input.folder
  font-size font-size
  color color1
  margin-bottom 0
  padding small
  border-radius extra-small
.theme-input.folder:focus
  background folder-input-bg
  color color1
.theme-input.folder:read-only:focus
  background #FFFFFF00

.p-xs
  padding extra-small
.p-m
  padding middle
.p-l
  padding large

.ondrag
  box-shadow 0 0 8px color7

.closed
  max-height 0
  min-height 0
  height 0
  padding-top 0
  padding-bottom 0
  border-bottom 0
  border-top 0
  transition all 0.3s ease

.load-animation
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  padding: 2rem 0;
  margin: 0 -5%;
  overflow: hidden;
  height: 50px;

.markdown-panel
  box-shadow 0 2px 2px color7-8
  margin width-border
  margin-left (middle + width-border)
  border-top-left-radius extra-small
  border-bottom-right-radius extra-small
  font-size small-font-size
  height markdown-panel-height
  background markdown-panel-bg
  svg
    fill svg-color
    overflow visible

.markdown-button
  cursor pointer
  text-align center
  margin auto 0 auto 0
  width markdown-button-width
  height 100%
  padding-top 2px

  transition background ease 0.2s
  background-image:
      radial-gradient(1px 45% at 0% 50%, color7, transparent),
      radial-gradient(1px 45% at 100% 50%, color7, transparent);
  .photo
    stroke svg-color
    stroke-width 2px
    fill transparent
.markdown-button.italic
  font-family Cursive
  padding-top 0
.markdown-button:hover
  background markdown-hover-panel-bg

.bold
  font-weight bold
.italic
  font-style italic
.underscore
  text-decoration underline
.strikethrough
  text-decoration line-through

/**
 * ==============================================
 * Dot Pulse
 * ==============================================
 */
.dot-pulse {
  position: relative;
  left: -9999px;
  width: 8px;
  height: 8px;
  border-radius: 4px;
  background-color: loading-color;
  color: loading-color;
  box-shadow: 9999px 0 0 -4px loading-color;
  animation: dot-pulse 1.5s infinite linear;
  animation-delay: .25s;
}

.dot-pulse::before, .dot-pulse::after {
  content: '';
  display: inline-block;
  position: absolute;
  top: 0;
  background-color: loading-color;
  color: loading-color;
}
.dot-pulse::before {
  width: 6px;
  height: 6px;
  border-radius: 3px;
}
.dot-pulse::after {
  width: 10px;
  height: 10px;
  border-radius: 5px;
}

.dot-pulse::before {
  box-shadow: 9975px 0 0 -3px loading-color;
  animation: dot-pulse-before 1.5s infinite linear;
  animation-delay: 0s;
}

.dot-pulse::after {
  box-shadow: 10014px 0 0 -5px loading-color;
  animation: dot-pulse-after 1.5s infinite linear;
  animation-delay: .5s;
}

@keyframes dot-pulse-before {
  0% {
    box-shadow: 9975px 0 0 -3px loading-color;
  }
  30% {
    box-shadow: 9975px 0 0 1px loading-color;
  }
  60%,
  100% {
    box-shadow: 9975px 0 0 -3px loading-color;
  }
}

@keyframes dot-pulse {
  0% {
    box-shadow: 9999px 0 0 -4px loading-color;
  }
  30% {
    box-shadow: 9999px 0 0 3px loading-color;
  }
  55%,
  100% {
    box-shadow: 9999px 0 0 -4px loading-color;
  }
}

@keyframes dot-pulse-after {
  0% {
    box-shadow: 10014px 0 0 -5px loading-color;
  }
  25% {
    box-shadow: 10014px 0 0 3px loading-color;
  }
  45% {
    box-shadow: 10014px 0 0 4px loading-color;
  }
  60%,
  100% {
    box-shadow: 10014px 0 0 -5px loading-color;
  }
}
/**
* ==================================
**/


// For mobile version
.mobile-only
  display none
.desktop-only
  display block

.dialogues-column
.messages-column
  transition width ease 0.2s

.profile-button
  svg
    margin ((middle-avatar-size - small-avatar-size) / 2)

@media (max-width: 800px)
  .dialogues-column
  .messages-column
    width 0

  .mobile-fullwidth
    width 100%
  #messages-page
    height 100%
    padding 0

  .mobile-only
    display block
  .desktop-only
    display none

  .header-title
    background bg-color-2
    cursor pointer
    padding-left middle
    padding-right middle

  .listing-button.selected
    background-color dialogue-color
  .listing-button.active.selected
    background-color dialogue-color-active
  .listing-button.folder.selected
    background-color folder-color
  .listing-button.folder.active.selected
    background-color folder-color-active

  .profile-button
    svg
      width mobile-profile-button-size
      height mobile-profile-button-size
      margin ((middle-avatar-size - mobile-profile-button-size) / 2)
      g
        transform scale(1.8)

  .scrollable
    overscroll-behavior contain

  #app
    height 100%
